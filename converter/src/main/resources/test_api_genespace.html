<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WDL converter</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4 bg-primary rounded rounded-lg text-white">Convert WDL to Diagram or Nextflow</h2>
        <form action="https://workflow.genespace.ru/diagrams/wdl/convert" method="post" enctype="multipart/form-data">
            <div class="mb-3">
                <input class="form-check-input" type="radio" name="wdl_type" id="radio_wdl_file" value="file" checked>
                  <label class="form-check-label" for="radio_wdl_file">
                    File
                  </label>
                  <input class="form-check-input" type="radio" name="wdl_type" id="radio_wdl_text" value="text">
                <label class="form-check-label" for="radio_wdl_text">
                  Plain text
                </label>
            </div>
            <div class="mb-3">
                <div class="from-group input_wdl_type_selector" id="div_file">
                <label for="input_wdl_file" class="form-label">Input file</label>
                <input type="file" class="form-control"  id="input_wdl_file" name="inputWdl">
                </div>
                <div class="form-group input_wdl_type_selector" id="div_text">
                <label for="input_wdl_text" class="form-label">WDL text</label>
                <textarea class="form-control" id="input_wdl_text" name="inputWdlText" rows="25"></textarea>
                </div>
            </div>
                        
            <div class="mb-3">
                <label for="convertType" class="form-label">Convert to:</label><br>
                    <select name="convertType" id="convertType" class="form-control" >
                      <option value="diagram">Diagram</option>
                      <option value="nextflow">Nextflow</option>
                    </select>
            </div>
            
            <div class="mb-3" id="diagram_output_type">
                <label for="outputType" class="form-label">Diagram output format:</label>
                    <select name="outputType" id="outputType" class="form-control">
                      <option value="image">PNG image</option>
                      <option value="text">XML diagram filie</option>
                    </select>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
    
    <script>
          $(document).ready(function() {
              $(".input_wdl_type_selector").hide();
    
              $("input[name$='wdl_type']").click(function() {
                      var test = $(this).val();
                      $(".input_wdl_type_selector").hide();
                      $("#div_"+test).show();
                  }); 
              $("#div_file").show();
              
              $('#convertType').on('change',function(){ 
                var test = $(this).val();
                if(test=="nextflow")
                    $("#diagram_output_type").hide();
                else
                    $("#diagram_output_type").show();
                    
            });
                  
          });
    </script>
</body>
</html> 